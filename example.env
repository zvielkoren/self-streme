
# Server Configuration
PORT=7000
ADDON_PORT=7001

# Cloudflare Tunnel Configuration (Optional)
# If you want to expose your app through Cloudflare Tunnel, set this token
# Get your token from: https://one.dash.cloudflare.com/
# Navigate to: Zero Trust → Access → Tunnels → Create/Configure Tunnel
# If TUNNEL_TOKEN is set, the app will automatically start cloudflared
# If not set, the app runs normally without tunnel
# TUNNEL_TOKEN=your_cloudflare_tunnel_token_here

# BASE_URL Configuration
# Set this to your public URL when deploying behind a proxy/load balancer
# The application will automatically detect proxy headers (X-Forwarded-Host, X-Forwarded-Proto)
# but you can override with this environment variable for custom setups
#
# IMPORTANT: Always set BASE_URL when using Cloudflare or any CDN/proxy to prevent mixed-content errors
#
# Examples:
# For local development: BASE_URL=http://127.0.0.1:7000 (or leave unset)
# For Cloudflare + Plesk: BASE_URL=https://your-domain.com (REQUIRED - set Cloudflare SSL to "Full" or "Full (strict)")
# For proxy/CDN: BASE_URL=https://your-domain.com
# For IP access: BASE_URL=http://192.168.1.100:7000
# For Render: BASE_URL=https://your-app.onrender.com (or leave unset for auto-detection)
#
# Cloudflare Setup:
# 1. Ensure Plesk has SSL certificate installed (Domains → SSL/TLS → Let's Encrypt)
# 2. Set Cloudflare SSL/TLS mode to "Full (strict)" NOT "Flexible"
# 3. Set BASE_URL=https://your-domain.com in this file or Plesk env vars
# 4. Restart the Node.js app in Plesk
#
BASE_URL=http://127.0.0.1:7000

# Jackett Configuration (Optional)
JACKETT_URL=http://localhost:9117
JACKETT_API_KEY=your_jackett_api_key

# Media Paths
# MEDIA_PATH=/path/to/your/media

# API Keys
OMDB_API_KEY=your_omdb_api_key

# Logging
LOG_LEVEL=info

# Scalable Cache Configuration
# Cache backend: memory (default), sqlite, redis
CACHE_BACKEND=memory

# Cache TTL in seconds (default: 3600 = 1 hour)
CACHE_TTL=3600

# Maximum number of cached files (default: 1000)
CACHE_MAX_SIZE=1000

# Maximum disk usage in MB (default: 5000 = 5GB)
CACHE_MAX_DISK_MB=5000

# Cleanup interval in seconds (default: 300 = 5 minutes)
CACHE_CLEANUP_INTERVAL=300

# Enable persistent cache storage (default: false)
CACHE_PERSISTENT=false

# Torrent Configuration
# Torrent connection timeout in milliseconds (default: 60000 = 60 seconds)
TORRENT_TIMEOUT=60000

# Maximum number of retry attempts for failed torrents (default: 3)
TORRENT_MAX_RETRIES=3

# Cache-Only Mode (Disable P2P fallback)
# When enabled, only cached videos will be streamed without P2P connectivity
# If a video is not in cache, it will return an error instead of trying P2P
# Default: false (P2P fallback enabled)
CACHE_ONLY_MODE=false

# Direct Stream Only Mode (Force HTTP streaming)
# When enabled, always provides direct HTTP streaming URLs via external services
# Perfect for series content - no P2P, no waiting, just stream
# Default: false
DIRECT_STREAM_ONLY=false

# ═══════════════════════════════════════════════════════════
# MAINTENANCE MODE
# ═══════════════════════════════════════════════════════════
# Enable maintenance mode to temporarily disable the service during updates or fixes
# When enabled, users will see a maintenance page with custom message
# Default: false
MAINTENANCE_MODE=false

# Custom maintenance message shown to users
# Default: "Service is currently under maintenance. Please try again later."
MAINTENANCE_MESSAGE=Service is currently under maintenance. Please try again later.

# Estimated end time for maintenance (ISO 8601 format)
# Example: 2025-11-21T10:00:00Z
# When this time is reached, maintenance mode will automatically disable
# Leave empty for indefinite maintenance
# MAINTENANCE_END_TIME=

# Whitelist IPs that can bypass maintenance mode (comma-separated)
# Useful for allowing admin access during maintenance
# Example: 127.0.0.1,192.168.1.100,10.0.0.5
# Default: empty (no IPs whitelisted)
# MAINTENANCE_WHITELIST_IPS=127.0.0.1

# Bypass token for accessing service during maintenance
# Add ?bypass=TOKEN to URL or send X-Maintenance-Bypass: TOKEN header
# Leave empty to disable bypass token
# Example: MAINTENANCE_BYPASS_TOKEN=secret_admin_token_123
# MAINTENANCE_BYPASS_TOKEN=
